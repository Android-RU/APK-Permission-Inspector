# üß© APK-Permission-Inspector

**APK-Permission-Inspector** ‚Äî —ç—Ç–æ —É—Ç–∏–ª–∏—Ç–∞ –Ω–∞ Python –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π (`permissions`) Android-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –°–∫—Ä–∏–ø—Ç –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∏–∑ **APK-—Ñ–∞–π–ª–∞** –∏–ª–∏ **AndroidManifest.xml**, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω—ã—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è—Ö –∏ –º–æ–∂–µ—Ç —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –¥–≤–µ –≤–µ—Ä—Å–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

> ‚ö°Ô∏è –û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å ‚Äî –ø–æ–º–æ—á—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º, QA –∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞–º –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –±—ã—Å—Ç—Ä–æ —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –∫–∞–∫ –æ–Ω–∏ –∏–∑–º–µ–Ω—è—é—Ç—Å—è –º–µ–∂–¥—É —Ä–µ–ª–∏–∑–∞–º–∏.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üì¶ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏ –ø–∞—Ä—Å–∏–Ω–≥ `AndroidManifest.xml` –∏–∑ APK  
- üßæ –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π —Å –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–µ–π:
  - `normal`
  - `dangerous`
  - `signature`
  - `unknown`
- üïµÔ∏è‚Äç‚ôÇÔ∏è –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π (`dangerous` –∏ `signature`)
- ‚öôÔ∏è –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É (`--only dangerous`, `--only signature`)
- üîç –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö –≤–µ—Ä—Å–∏–π APK/–º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ (–ø–æ—è–≤–∏–≤—à–∏–µ—Å—è –∏ —É–¥–∞–ª—ë–Ω–Ω—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è)
- üíæ –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–∞ –≤ JSON
- üé® –¶–≤–µ—Ç–Ω–æ–π CLI-–≤—ã–≤–æ–¥ —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ (–Ω–∞ –±–∞–∑–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ [Rich](https://github.com/Textualize/rich))
- üß± –ö–æ–¥ –≤–æ–∑–≤—Ä–∞—Ç–∞ –¥–ª—è CI/CD:
  - `0` ‚Äî —É—Å–ø–µ—à–Ω—ã–π –∞–Ω–∞–ª–∏–∑  
  - `1` ‚Äî –æ—à–∏–±–∫–∞ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö  
  - `3` ‚Äî –ø–æ—è–≤–∏–ª–∏—Å—å –Ω–æ–≤—ã–µ –æ–ø–∞—Å–Ω—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è (`--fail-on-new-dangerous`)

---

## üß∞ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- **Python 3.9+**
- –û–°: Windows / macOS / Linux

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:
```bash
pip install typer rich apkutils2 lxml
````

### –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:

```bash
git clone https://github.com/Android-RU/APK-Permission-Inspector.git
cd APK-Permission-Inspector
```

---

## üß† –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ê–Ω–∞–ª–∏–∑ APK

```bash
python permission.py analyze --apk app-release.apk
```

### 2. –ê–Ω–∞–ª–∏–∑ AndroidManifest.xml

```bash
python permission.py analyze --manifest AndroidManifest.xml
```

### 3. –§–∏–ª—å—Ç—Ä —Ç–æ–ª—å–∫–æ –æ–ø–∞—Å–Ω—ã—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π

```bash
python permission.py analyze --apk app.apk --only dangerous
```

### 4. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö –≤–µ—Ä—Å–∏–π APK

```bash
python permission.py analyze --apk old.apk --compare-apk new.apk
```

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–æ–≤—ã–µ –æ–ø–∞—Å–Ω—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è (–¥–ª—è CI)

```bash
python permission.py analyze --apk old.apk --compare-apk new.apk --fail-on-new-dangerous
```

### 6. –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–∞ –≤ JSON

```bash
python permission.py analyze --apk app.apk -o report.json
```

---

## üìä –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                    Permissions (Base)                        ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
‚îè‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î≥‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î≥‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î≥‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îì
‚îÉ Permission                                     ‚îÉ Category   ‚îÉ Group      ‚îÉ Sensitive  ‚îÉ
‚î°‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïá‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïá‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚ïá‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚î©
‚îÇ android.permission.INTERNET                    ‚îÇ normal     ‚îÇ NETWORK    ‚îÇ ‚ùå         ‚îÇ
‚îÇ android.permission.ACCESS_FINE_LOCATION        ‚îÇ dangerous  ‚îÇ LOCATION   ‚îÇ ‚úÖ         ‚îÇ
‚îÇ android.permission.RECORD_AUDIO                ‚îÇ dangerous  ‚îÇ MICROPHONE ‚îÇ ‚úÖ         ‚îÇ
‚îÇ android.permission.CAMERA                      ‚îÇ dangerous  ‚îÇ CAMERA     ‚îÇ ‚úÖ         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## ‚öñÔ∏è –ö–æ–¥—ã –≤–æ–∑–≤—Ä–∞—Ç–∞

| –ö–æ–¥ | –ó–Ω–∞—á–µ–Ω–∏–µ                                                     |
| --- | ------------------------------------------------------------ |
| `0` | –£—Å–ø–µ—à–Ω—ã–π –∞–Ω–∞–ª–∏–∑                                              |
| `1` | –û—à–∏–±–∫–∞ –≤–≤–æ–¥–∞ –∏–ª–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞                                    |
| `3` | –ù–∞–π–¥–µ–Ω—ã –Ω–æ–≤—ã–µ –æ–ø–∞—Å–Ω—ã–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è (`--fail-on-new-dangerous`) |

---

## ‚öôÔ∏è –ê—Ä–≥—É–º–µ–Ω—Ç—ã CLI

| –ê—Ä–≥—É–º–µ–Ω—Ç                  | –û–ø–∏—Å–∞–Ω–∏–µ                                                         |
| ------------------------- | ---------------------------------------------------------------- |
| `--apk` / `-a`            | –ü—É—Ç—å –∫ APK-—Ñ–∞–π–ª—É                                                 |
| `--manifest` / `-m`       | –ü—É—Ç—å –∫ AndroidManifest.xml                                       |
| `--compare-apk`           | –í—Ç–æ—Ä–æ–π APK –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è                                         |
| `--compare-manifest`      | –í—Ç–æ—Ä–æ–π –º–∞–Ω–∏—Ñ–µ—Å—Ç –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è                                    |
| `--only`                  | –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (normal, dangerous, signature, unknown) |
| `--fail-on-new-dangerous` | –í–æ–∑–≤—Ä–∞—Ç –∫–æ–¥–∞ 3 –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö dangerous                     |
| `--output` / `-o`         | –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç—á—ë—Ç–∞ –≤ JSON                                         |
| `--no-color`              | –û—Ç–∫–ª—é—á–∏—Ç—å —Ü–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥                                          |

---

## üìÇ –ü—Ä–∏–º–µ—Ä JSON-–æ—Ç—á—ë—Ç–∞

```json
{
  "permissions": [
    {
      "name": "android.permission.ACCESS_FINE_LOCATION",
      "category": "dangerous",
      "group": "LOCATION",
      "sensitive": true
    },
    {
      "name": "android.permission.INTERNET",
      "category": "normal",
      "group": "NETWORK",
      "sensitive": false
    }
  ],
  "diff": {
    "added": ["android.permission.ACCESS_MEDIA_LOCATION"],
    "removed": [],
    "newDangerous": ["android.permission.ACCESS_MEDIA_LOCATION"]
  }
}
```

---

## üß© –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ

**–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:**
‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞, –∫–∞–∫–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

**–î–ª—è QA –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**
‚Üí –ë—ã—Å—Ç—Ä–æ–µ –≤—ã—è–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –æ–ø–∞—Å–Ω—ã—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏.

**–î–ª—è CI/CD:**
‚Üí –î–æ–±–∞–≤—å—Ç–µ —à–∞–≥ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ –ø–∞–π–ø–ª–∞–π–Ω –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–π—Ç–µ —Ä–µ–ª–∏–∑—ã —Å –∏–∑–±—ã—Ç–æ—á–Ω—ã–º–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏.

---

## üß± –ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ GitHub Actions

```yaml
- name: Check Android permissions
  run: |
    python permission.py analyze --apk old.apk --compare-apk new.apk --fail-on-new-dangerous
```

---

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ –ª–∏—Ü–µ–Ω–∑–∏–∏ **MIT**.
–í—ã –º–æ–∂–µ—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –∏–∑–º–µ–Ω—è—Ç—å –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —É–∫–∞–∑–∞–Ω–∏—è –∞–≤—Ç–æ—Ä–∞.

---

> üß† *APK-Permission-Inspector ‚Äî –ª—ë–≥–∫–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –¥–∞—ë—Ç –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –≤–∞—à–∏–º Android-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º.*
